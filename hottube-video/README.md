# 视频业务

## TODO
- 切片上传
- 文件转码
- 上传服务器

## 综合解决方案选取

1. minio存储+range分片获取播放
2. **minio存储+m3u8分片流式处理**
3. 磁盘存储+分片方案

> 1. `ffmpeg`~~如何直接内存操作数据流 不通过磁盘读写从而提升速度~~
     >    - 由于空间有限 这里需要限流->考虑消息队列 但是视频缓存在哪里 - 硬盘
>    - 还是需要通过**临时硬盘目录**存储视频文件 再通过异步处理视频分片和上传
> 2. 对于大视频文件如`GB`级别的 内存中放不下怎么处理 - 还是硬盘

## 处理思路

1. 前端文件切片上传 - 前台显示上传进度
2. 后端合并文件利用`ffmpeg`切片生成`m3u8`文件 - 前台显示处理状态 `websocket`通信
3. 将视频文件上传到`minio`服务器 注意保存在同一目录中